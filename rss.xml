<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>kt286</title>
    <link>https://blog.kt286.com/</link>
    
    <atom:link href="https://blog.kt286.com/rss.xml" rel="self" type="application/rss+xml"/>
    
    <description></description>
    <pubDate>Sun, 17 Apr 2022 19:03:46 GMT</pubDate>
    <generator>http://hexo.io/</generator>
    
    <item>
      <title>åœ¨ deepin ä¸­ä½¿ç”¨å°é¹¤éŸ³å½¢</title>
      <link>https://blog.kt286.com/post/use-flypy-in-deepin/</link>
      <guid>https://blog.kt286.com/post/use-flypy-in-deepin/</guid>
      <pubDate>Mon, 14 Mar 2022 20:56:25 GMT</pubDate>
      
        
        
      <description>&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;ä¹‹å‰ä¸€ç›´åœ¨ä½¿ç”¨å…¨æ‹¼è¾“å…¥æ³•ï¼Œä½†æ˜¯å…¨æ‹¼æœ‰ä¸€ä¸ªä¼—æ‰€å‘¨çŸ¥çš„é—®é¢˜ï¼šé‡ç ç‡é«˜ã€‚è™½ç„¶è¿™ç±»è¾“å…¥æ³•å¤§éƒ½æœ‰è¯é¢‘åŠ¨æ€è°ƒæ•´ã€äº‘è¾“å…¥ç­‰åŠŸèƒ½ã€‚ä½†æ˜¯æ¯ä¸ªç”¨æˆ·ä¹ æƒ¯ä¸åŒï¼Œæ¢å°</description>
        
      
      
      
      <content:encoded><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä¹‹å‰ä¸€ç›´åœ¨ä½¿ç”¨å…¨æ‹¼è¾“å…¥æ³•ï¼Œä½†æ˜¯å…¨æ‹¼æœ‰ä¸€ä¸ªä¼—æ‰€å‘¨çŸ¥çš„é—®é¢˜ï¼šé‡ç ç‡é«˜ã€‚è™½ç„¶è¿™ç±»è¾“å…¥æ³•å¤§éƒ½æœ‰è¯é¢‘åŠ¨æ€è°ƒæ•´ã€äº‘è¾“å…¥ç­‰åŠŸèƒ½ã€‚ä½†æ˜¯æ¯ä¸ªç”¨æˆ·ä¹ æƒ¯ä¸åŒï¼Œæ¢å°è®¾å¤‡åæ‰“å­—æ•ˆç‡å°±ä¼šé™ä½ã€‚è€Œäº”ç¬”è¾“å…¥æ³•éœ€è¦è®°å¿†å¤§é‡å­—æ ¹ï¼Œä¸Šæ‰‹éš¾åº¦å¤§ã€‚æ‰€ä»¥åœ¨ç½‘ä¸Šçœ‹åˆ°å°é¹¤éŸ³å½¢çš„æ—¶å€™çœ¼å‰ä¸€äº®ï¼Œå†³å®šå°è¯•ä¸€ä¸‹ã€‚</p><h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>å°é¹¤éŸ³å½¢åˆ†åŒæ‹¼å’ŒåŒå½¢ä¸¤éƒ¨åˆ†ï¼Œç®€å•ç†è§£å°±æ˜¯å…ˆå‘Šè¯‰è¾“å…¥æ³•è¿™ä¸ªå­—æ€ä¹ˆè¯»ï¼Œå†å‘Šè¯‰è¾“å…¥æ³•æ€ä¹ˆå†™ã€‚é€šè¿‡ä¸¤ä¸ªç»´åº¦ç¡®å®šä¸€ä¸ªå­—ï¼Œæå¤§å‡å°‘äº†é‡ç é—®é¢˜ã€‚è¯¦ç»†ä»‹ç»è§å°é¹¤éŸ³å½¢å®˜ç½‘<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="å°é¹¤å…¥é—¨">[1]</span></a></sup>ã€‚ä¸‹è¾¹æ”¾ä¸€ä¸‹åŒæ‹¼é”®ä½å›¾å’Œé¹¤å½¢å­—æ ¹å›¾å¤‡å¿˜ã€‚</p><h3 id="åŒæ‹¼"><a href="#åŒæ‹¼" class="headerlink" title="åŒæ‹¼"></a>åŒæ‹¼</h3><p><img src="/img/posts/use-flypy-in-deepin/hejp.png" alt="å°é¹¤åŒæ‹¼é”®ä½å›¾"></p><h3 id="åŒå½¢"><a href="#åŒå½¢" class="headerlink" title="åŒå½¢"></a>åŒå½¢</h3><p><img src="/img/posts/use-flypy-in-deepin/xhup.png" alt="å°é¹¤é¹¤å½¢å­—æ ¹å›¾"></p><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><h3 id="æ–¹æ¡ˆ1ï¼šrime-æŒ‚æ¥ï¼ˆå®˜æ–¹ï¼‰"><a href="#æ–¹æ¡ˆ1ï¼šrime-æŒ‚æ¥ï¼ˆå®˜æ–¹ï¼‰" class="headerlink" title="æ–¹æ¡ˆ1ï¼šrime æŒ‚æ¥ï¼ˆå®˜æ–¹ï¼‰"></a>æ–¹æ¡ˆ1ï¼šrime æŒ‚æ¥ï¼ˆå®˜æ–¹ï¼‰</h3><p>å°é¹¤å®˜æ–¹åªæä¾›äº† Windows å’Œ Android ç‰ˆå®‰è£…åŒ…ï¼Œå…¶ä»–å¹³å°éœ€è¦ä½¿ç”¨ rime æŒ‚æ¥ã€‚ä½†æ˜¯ deepin ä»“åº“ä¸­æœªæä¾› fcitx5-rime åŒ…ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±ç¼–è¯‘å®‰è£…ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># å®‰è£…ç¼–è¯‘å·¥å…·</span><br>sudo apt-get install -y build-essential cmake-extras extra-cmake-modules<br><br><span class="hljs-comment"># ç¼–è¯‘æ”¯æŒ lua çš„ librime åº“</span><br>sudo apt-get install -y libcapnp-dev libgoogle-glog-dev libyaml-cpp-dev libleveldb-dev libmarisa-dev capnproto<br>git <span class="hljs-built_in">clone</span> https://github.com/rime/librime.git ~/workspace/librime<br><span class="hljs-built_in">cd</span> ~/workspace/librime<br>./install-plugins.sh hchunhui/librime-lua<br>make merged-plugins<br>sudo make install<br><br><span class="hljs-comment"># ç¼–è¯‘ fcitx5-rime</span><br>sudo apt-get install -y appstream libecm-dev libfcitx5core-dev fcitx5-modules-dev<br><span class="hljs-built_in">mkdir</span> -p ~/workspace/fcitx5-rime<br>git <span class="hljs-built_in">clone</span> https://github.com/fcitx/fcitx5-rime.git ~/workspace/fcitx5-rime<br><span class="hljs-built_in">mkdir</span> -p ~/workspace/fcitx5-rime/build<br><span class="hljs-built_in">cd</span> ~/workspace/fcitx5-rime/build<br>cmake .. -DCMAKE_INSTALL_PREFIX=/usr<br>make -j4<br>sudo make install<br></code></pre></td></tr></table></figure><p>ç¼–è¯‘å®‰è£…å®Œæˆåï¼Œä¸‹è½½å°é¹¤ç½‘ç›˜<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="å°é¹¤ç½‘ç›˜">[2]</span></a></sup>ä¸­æŒ‚æ¥æ–‡ä»¶ <code>3.1.æŒ‚æ¥â€”â€”éŸ³å½¢ç /å°é¹¤éŸ³å½¢â€œé¼ é¡»ç®¡â€for macOS.zip</code>ã€‚è§£å‹åï¼Œå°† rime ç›®å½•ä¸­æ‰€æœ‰æ–‡ä»¶å¤åˆ¶åˆ° <code>~/.local/share/fcitx5/rime</code> ç›®å½•ä¸­ã€‚é‡å¯ fcitx5 ï¼Œæ·»åŠ  <code>ä¸­å·éŸ»</code> è¾“å…¥æ³•åå³å¯ä½¿ç”¨ã€‚<br><img src="/img/posts/use-flypy-in-deepin/fcitx5-rime.png" alt="fcitx5-rime"></p><h3 id="æ–¹æ¡ˆ2ï¼šfcitx5-flypy"><a href="#æ–¹æ¡ˆ2ï¼šfcitx5-flypy" class="headerlink" title="æ–¹æ¡ˆ2ï¼šfcitx5-flypy"></a>æ–¹æ¡ˆ2ï¼šfcitx5-flypy</h3><p>fcitx5-flypy æ˜¯åŸºäºå…¬å¼€ç è¡¨æ‰“é€ çš„é€‚é… fcitx5 çš„è¾“å…¥æ³•ï¼Œæ— éœ€å®‰è£… rime å³å¯ä½¿ç”¨ã€‚ç¼–è¯‘å®‰è£…æ–¹æ³•å¦‚ä¸‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># å®‰è£…ç¼–è¯‘å·¥å…·</span><br>sudo apt-get install -y build-essential cmake-extras extra-cmake-modules<br><br><span class="hljs-comment"># ç¼–è¯‘ fcitx5-lua (orq è¾“å…¥å½“å‰æ—¥æœŸåŠŸèƒ½ä½¿ç”¨ lua å®ç°ï¼Œå¦‚ä¸éœ€è¦ï¼Œå¯ä»¥è·³è¿‡æ­¤æ­¥)</span><br>sudo apt-get install -y gettext appstream libfcitx5core-dev fcitx5-modules-dev liblua5.3-dev <br><span class="hljs-built_in">mkdir</span> -p ~/workspace/fcitx5-lua<br>git <span class="hljs-built_in">clone</span> https://github.com/fcitx/fcitx5-lua.git ~/workspace/fcitx5-lua<br><span class="hljs-built_in">mkdir</span> -p ~/workspace/fcitx5-lua/build<br><span class="hljs-built_in">cd</span> ~/workspace/fcitx5-lua/build<br>cmake .. -DCMAKE_INSTALL_PREFIX=/usr<br>make -j4<br>sudo make install<br><br><span class="hljs-comment"># ç¼–è¯‘ fcitx5-flypy</span><br>sudo apt-get install -y gettext appstream libecm-dev libfcitx5core-dev libboost-dev libimecore-dev libimetable-dev<br><span class="hljs-built_in">mkdir</span> -p ~/workspace/fcitx5-flypy<br>git <span class="hljs-built_in">clone</span> https://github.com/kt286/fcitx5-flypy.git ~/workspace/fcitx5-flypy<br><span class="hljs-built_in">mkdir</span> -p ~/workspace/fcitx5-flypy/build<br><span class="hljs-built_in">cd</span> ~/workspace/fcitx5-flypy/build<br>cmake .. -DCMAKE_INSTALL_PREFIX=/usr<br>make -j4<br>sudo make install<br></code></pre></td></tr></table></figure><p>ç›®å‰å‘ç°å‡ ä¸ªå°é—®é¢˜ï¼š</p><ol><li>ä½¿ç”¨ä¸‡èƒ½é”® ` æ—¶ï¼Œä¼šæç¤ºè¯è¯­ï¼Œè€Œä¸ä»…ä»…æ˜¯å•å­—</li><li>ç è¡¨ä¸­è®°å½•æ¡æ•°æ²¡æœ‰å®˜æ–¹ç è¡¨å¤šï¼ˆWindows ç‰ˆæœ‰ 67656 æ¡æ•°æ®ï¼Œä½†æœ¬é¡¹ç›®åªæœ‰ 57655 æ¡æ•°æ®ï¼‰</li><li><del>ä½¿ç”¨ orqã€ouj æ— æ³•è¾“å…¥å½“å‰æ—¥æœŸå’Œæ—¶é—´</del></li></ol><p><img src="/img/posts/use-flypy-in-deepin/mabn.png" alt="Windows ç‰ˆç è¡¨"></p><p>å¦‚åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°å…¶ä»–é—®é¢˜ï¼Œæ¬¢è¿åˆ° <a href="https://github.com/kt286/fcitx5-flypy/issues">github</a> ä¸­æ issueã€‚</p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><ol><li>deepin 20 ä»“åº“é‡Œè™½ç„¶æä¾›äº† fcitx5ï¼Œä½†æ˜¯åªæä¾›äº†ä¸€äº›åŸºç¡€åŒ…ã€‚fcitx5-rimeã€fcitx5-lua ç­‰éƒ½æ²¡æœ‰æä¾›ã€‚å¸Œæœ›åç»­å¯ä»¥è¡¥å…¨ã€‚</li><li>ä½¿ç”¨äº†ä¸€æ®µæ—¶é—´å°é¹¤éŸ³å½¢åï¼Œè¾“å…¥äººåæ‹¼éŸ³æ—¶ä¼šä¸è‡ªè§‰è¾“å…¥åŒæ‹¼ã€‚è€Œä¸”ç”±äºä¹‹å‰è¿‡äºä¾èµ–æ‹¼éŸ³è¾“å…¥æ³•ï¼Œå¯¼è‡´å¾ˆå¤šå­—åªä¼šè¯»ï¼Œä¸ä¼šå†™ã€‚æ‰“å­—é€Ÿåº¦åè€Œæ˜æ˜¾é™ä½ã€‚éœ€è¦ä¸€æ®µæ—¶é—´å»é€‚åº”ã€‚ç®—æ˜¯æœ‰å¾—æœ‰å¤±å§ã€‚</li></ol><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://help.flypy.com/#/xh">å°é¹¤å…¥é—¨</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="http://flypy.ys168.com/">å°é¹¤ç½‘ç›˜</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content:encoded>
      
      
      <category domain="https://blog.kt286.com/categories/Deepin/">Deepin</category>
      
      
      <category domain="https://blog.kt286.com/tags/deepin/">deepin</category>
      
      <category domain="https://blog.kt286.com/tags/flypy/">flypy</category>
      
      <category domain="https://blog.kt286.com/tags/rime/">rime</category>
      
      
      <comments>https://blog.kt286.com/post/use-flypy-in-deepin/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>å¤§å¹…é™ä½ Wine å¾®ä¿¡å†…å­˜å ç”¨</title>
      <link>https://blog.kt286.com/post/reduce-wine-wechat-memory-usage/</link>
      <guid>https://blog.kt286.com/post/reduce-wine-wechat-memory-usage/</guid>
      <pubDate>Fri, 25 Feb 2022 11:20:18 GMT</pubDate>
      
        
        
      <description>&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;æ¯æ¬¡æ‰“å¼€ Wine ç‰ˆå¾®ä¿¡ï¼Œå†…å­˜ä½¿ç”¨ç‡å°±ä¼šæ¶¨ä¸Šä¸€å¤§æˆªã€‚å¹³æ—¶æ²¡æ€ä¹ˆåœ¨æ„ï¼Œä»Šå¤©éšæ„çœ‹äº†ä¸€çœ¼å°±æƒŠå‘†äº†ï¼šå¾®ä¿¡åˆšæ‰“å¼€å°±å·²ç»å ç”¨äº† 1G å·¦å³ï¼Œè€Œä¸”éšç€</description>
        
      
      
      
      <content:encoded><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æ¯æ¬¡æ‰“å¼€ Wine ç‰ˆå¾®ä¿¡ï¼Œå†…å­˜ä½¿ç”¨ç‡å°±ä¼šæ¶¨ä¸Šä¸€å¤§æˆªã€‚å¹³æ—¶æ²¡æ€ä¹ˆåœ¨æ„ï¼Œä»Šå¤©éšæ„çœ‹äº†ä¸€çœ¼å°±æƒŠå‘†äº†ï¼šå¾®ä¿¡åˆšæ‰“å¼€å°±å·²ç»å ç”¨äº† 1G å·¦å³ï¼Œè€Œä¸”éšç€ä½¿ç”¨æ—¶é—´æ¨ç§»ç”šè‡³èƒ½æ¶¨åˆ° 2G ã€‚ä¸èƒ½å¿ï¼Œä»Šå¤©ä¸€å®šè¦å¥½å¥½æ²»ä¸€æ²»è¿™ä¸ªå†…å­˜å¤§æˆ·ã€‚<br><img src="/img/posts/reduce-wine-wechat-memory-usage/1.png" alt="Wine å¾®ä¿¡å†…å­˜å ç”¨"></p><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>ç³»ç»Ÿç›‘è§†å™¨é‡Œæœç´¢ <code>wechat</code> ï¼Œå‘ç°äº†åç‚¹ï¼šå¾®ä¿¡æœ¬ä½“åªå ç”¨äº†ä¸åˆ° 100M å†…å­˜ï¼Œå‰©ä¸‹çš„éƒ½è¢« <code>WeChatWebBrower.exe</code> å’Œ <code>WeChatApp.exe</code> è¿™ä¸¤ä¸ªè¿›ç¨‹å èµ°äº†ã€‚çº³å°¼ï¼Ÿï¼Ÿæˆ‘ç”¨çš„å¯æ˜¯å¾®ä¿¡ï¼Œä¸æ˜¯å¾®ä¿¡æµè§ˆå™¨ã€‚ç²¾ç®€æ‰è¿™ä¸¤ä¸ªè¿›ç¨‹åº”è¯¥å°±å¯ä»¥å‡å°‘å†…å­˜å ç”¨äº†ã€‚</p><h2 id="ç²¾ç®€"><a href="#ç²¾ç®€" class="headerlink" title="ç²¾ç®€"></a>ç²¾ç®€</h2><p>å³é”®å±æ€§é‡Œæ‰¾åˆ°è¿™ä¸¤ä¸ªè¿›ç¨‹æ‰€åœ¨çš„ç›®å½•ï¼Œå‘ç°ä¸¤ä¸ªéƒ½åœ¨ä¸€èµ·ï¼Œåˆšå¥½å¯ä»¥ä¸€ç½‘æ‰“å°½ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">rm</span> -rf ~/.deepinwine/Deepin-WeChat/drive_c/users/$(<span class="hljs-built_in">whoami</span>)/Application\ Data/Tencent/WeChat/XPlugin/Plugins/XWeb/<br><span class="hljs-built_in">touch</span> ~/.deepinwine/Deepin-WeChat/drive_c/users/$(<span class="hljs-built_in">whoami</span>)/Application\ Data/Tencent/WeChat/XPlugin/Plugins/XWeb<br><span class="hljs-built_in">chmod</span> 000 ~/.deepinwine/Deepin-WeChat/drive_c/users/$(<span class="hljs-built_in">whoami</span>)/Application\ Data/Tencent/WeChat/XPlugin/Plugins/XWeb <br></code></pre></td></tr></table></figure><p>ç²¾ç®€æ‰è¿™ä¸¤ä¸ªè¿›ç¨‹åå†æ¬¡æ‰“å¼€å¾®ä¿¡ï¼Œåªå ç”¨ 200M å·¦å³å†…å­˜ï¼Œèˆ’æœäº†ã€‚<br><img src="/img/posts/reduce-wine-wechat-memory-usage/2.png" alt="ç²¾ç®€åçš„å¾®ä¿¡å†…å­˜å ç”¨"></p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>å½“ç„¶äº†ï¼Œç²¾ç®€ä¹‹åè‚¯å®šä¼šæœ‰ä¸€äº›åŠŸèƒ½å¼‚å¸¸ï¼Œç›®å‰å‘ç°çš„åªæœ‰æ”¶åˆ°çš„é“¾æ¥ã€å…¬ä¼—å·æ–‡ç« æ— æ³•æ‰“å¼€ï¼Œå°ç¨‹åºæ— æ³•ä½¿ç”¨ã€‚åæ­£æˆ‘ä¹Ÿä¸åœ¨ç”µè„‘ä¸Šä½¿ç”¨å°ç¨‹åºï¼Œå¯ä»¥å¿ã€‚è‡³äºå…¬ä¼—å·æ–‡ç« æŸ¥çœ‹ï¼Œå¯ä»¥é€šè¿‡ä¸€äº›è®¾ç½®æ¥ç»§ç»­ä½¿ç”¨ï¼Œåªæ˜¯æœ‰äº›ç¹çã€‚<br><img src="/img/posts/reduce-wine-wechat-memory-usage/3.png" alt="å…³é—­`ä½¿ç”¨ç³»ç»Ÿé»˜è®¤æµè§ˆå™¨æ‰“å¼€ç½‘é¡µ`"><br><img src="/img/posts/reduce-wine-wechat-memory-usage/4.png" alt="ç”¨é»˜è®¤æµè§ˆå™¨æ‰“å¼€"></p>]]></content:encoded>
      
      
      <category domain="https://blog.kt286.com/categories/Wine/">Wine</category>
      
      
      <category domain="https://blog.kt286.com/tags/Wine/">Wine</category>
      
      <category domain="https://blog.kt286.com/tags/%E5%BE%AE%E4%BF%A1/">å¾®ä¿¡</category>
      
      
      <comments>https://blog.kt286.com/post/reduce-wine-wechat-memory-usage/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>ä½¿ç”¨ FFmpeg ä¸‹è½½ä¼ªè£…æˆå›¾ç‰‡çš„ m3u8 è§†é¢‘</title>
      <link>https://blog.kt286.com/post/ffmpeg-download-video-faked-as-image/</link>
      <guid>https://blog.kt286.com/post/ffmpeg-download-video-faked-as-image/</guid>
      <pubDate>Sun, 13 Feb 2022 16:07:43 GMT</pubDate>
      
        
        
      <description>&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;æœ€è¿‘çœ‹åˆ°ä¸€ä¸ªä¸é”™çš„è§†é¢‘ï¼Œæƒ³è¦ä¸‹è½½åˆ°æœ¬åœ°æ”¶è—èµ·æ¥ï¼Œå…å¾—å“ªå¤©ç½‘å€å¤±æ•ˆæ— æ³•æ’­æ”¾ã€‚ä½†æ˜¯ä½¿ç”¨ FFmpeg ä¸‹è½½çš„æ—¶å€™æŠ¥äº†ä¸ªé”™&lt;/p&gt;
&lt;figure</description>
        
      
      
      
      <content:encoded><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœ€è¿‘çœ‹åˆ°ä¸€ä¸ªä¸é”™çš„è§†é¢‘ï¼Œæƒ³è¦ä¸‹è½½åˆ°æœ¬åœ°æ”¶è—èµ·æ¥ï¼Œå…å¾—å“ªå¤©ç½‘å€å¤±æ•ˆæ— æ³•æ’­æ”¾ã€‚ä½†æ˜¯ä½¿ç”¨ FFmpeg ä¸‹è½½çš„æ—¶å€™æŠ¥äº†ä¸ªé”™</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">[hls,applehttp @ 0x55efcdf226c0] Could not find codec parameters for stream 0 (Video: png, none(pc)): unspecified size<br>Consider increasing the value for the &#x27;analyzeduration&#x27; and &#x27;probesize&#x27; options<br>Input #0, hls,applehttp, from &#x27;https://pv.xbottle.top/demo/rick.m3u8&#x27;:<br>  Duration: 00:03:32.44, bitrate: 0 kb/s<br>  Program 0 <br>    Metadata:<br>      variant_bitrate : 0<br>    Stream #0:0: Video: png, none(pc), 25 tbr, 25 tbn, 25 tbc<br>    Metadata:<br>      variant_bitrate : 0<br>Output #0, mp4, to &#x27;rick.mp4&#x27;:<br>Output file #0 does not contain any stream<br></code></pre></td></tr></table></figure><p><img src="/img/posts/ffmpeg-download-video-faked-as-image/1.png" alt="FFmpeg ä¸‹è½½æŠ¥é”™"></p><p>PNG ï¼Ÿï¼Ÿç½‘é¡µé‡Œæ˜æ˜å¯ä»¥æ’­æ”¾çš„ã€‚ä¸‹è½½äº†å…¶ä¸­ä¸€ä¸ªç‰‡æ®µï¼Œæ‰“å¼€åå‘ç°çœŸçš„æ˜¯ä¸€å¼ å›¾ç‰‡ã€‚ä½¿ç”¨ hexdump æŸ¥çœ‹äº†ä¸€ä¸‹ï¼Œæ–‡ä»¶æœ€å¼€å§‹ç¡®å®æ˜¯ PNG å›¾ç‰‡ï¼Œä½†æ˜¯ç´§æ¥ç€å°±çœ‹åˆ°äº† <code>FFmpeg Service01</code> å­—æ ·ï¼Œç¡®è®¤äº†è¿™ä¸ªæ–‡ä»¶æ˜¯ç”±ä¸€å¼ å›¾ç‰‡å’Œä¸€æ®µè§†é¢‘æ‹¼æ¥è€Œæˆã€‚</p><p><img src="/img/posts/ffmpeg-download-video-faked-as-image/2.png" alt="hexdump è¾“å‡º"></p><p>Google äº†ä¸€ä¸‹ï¼Œæ‰¾åˆ°ä¸¤ç¯‡æ–‡ç«  <sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="æäº‹æƒ…ï¼šç”¨â€œå›¾åºŠâ€ä¼ è§†é¢‘ï¼Œè‡ªå¸¦å…è´¹ CDN åŠ é€Ÿï¼ˆå·²å¤æ´»ï¼ï¼‰">[1]</span></a></sup> <sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="ç”¨å›¾åºŠçœ‹è§†é¢‘çš„ä½“éªŒÂ·æ”¹">[2]</span></a></sup>ã€‚è®²çš„æ˜¯é€šè¿‡åœ¨è§†é¢‘å‰åŠ ä¸€ä¸ªå°çš„ PNG å›¾ç‰‡æ¥ä¼ªè£…æˆå›¾ç‰‡éª—è¿‡å›¾åºŠçš„æ ¡éªŒï¼Œhls.js åœ¨æ’­æ”¾æ—¶ä¼šè‡ªåŠ¨å¿½ç•¥å‰è¾¹çš„å›¾ç‰‡ã€‚ä½† FFmpeg æ²¡æœ‰ç›¸å…³å¤„ç†ï¼ŒæŠŠä¼ªè£…åçš„è§†é¢‘è¯†åˆ«æˆäº†å›¾ç‰‡å¯¼è‡´ä¸‹è½½å¤±è´¥ã€‚</p><h2 id="è§£å†³æ€è·¯"><a href="#è§£å†³æ€è·¯" class="headerlink" title="è§£å†³æ€è·¯"></a>è§£å†³æ€è·¯</h2><p>çŸ¥é“äº†é—®é¢˜çš„åŸå› ï¼Œè§£å†³æ€è·¯å°±æœ‰äº†ã€‚ä½†æ˜¯å®é™…æ“ä½œè¿‡ç¨‹ä¸­é‡åˆ°äº†å¾ˆå¤šé—®é¢˜ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹ã€‚</p><h3 id="ç¬¬ä¸€æ¬¡å°è¯•ï¼ˆå¤±è´¥ï¼‰"><a href="#ç¬¬ä¸€æ¬¡å°è¯•ï¼ˆå¤±è´¥ï¼‰" class="headerlink" title="ç¬¬ä¸€æ¬¡å°è¯•ï¼ˆå¤±è´¥ï¼‰"></a>ç¬¬ä¸€æ¬¡å°è¯•ï¼ˆå¤±è´¥ï¼‰</h3><p>é¦–å…ˆæƒ³åˆ°çš„å°±æ˜¯ç»™ m3u8 ä¸­æ¯ä¸ªç‰‡æ®µæŒ‡å®šæ ¼å¼ï¼Œä½†æ˜¯ç¿»é˜… FFmpeg æ–‡æ¡£åæ²¡æœ‰æ‰¾åˆ°ç›¸å…³å‚æ•°ï¼Œåªæ‰¾åˆ°äº† hls æ ¼å¼ä¸­ä¸€ä¸ªå‚æ•° <code>seg_format_options</code> <sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="FFmpeg Formats Documentation">[3]</span></a></sup>, æ ¹æ®æè¿°çŒœæµ‹æ˜¯è§£æè§†é¢‘ç‰‡æ®µæ—¶çš„ä¸€äº›å‚æ•°ï¼Œå°è¯•æ­é… <code>skip_initial_bytes</code> å‚æ•°ä½¿ç”¨ã€‚ç»“æœè¿˜æ˜¯æŠ¥é”™</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ffmpeg -f hls -seg_format_options skip_initial_bytes=8 -i https://pv.xbottle.top/demo/rick.m3u8 -c copy output.mp4<br></code></pre></td></tr></table></figure><p>ç”±äºè¿™ä¸ªå‚æ•°æ˜¯æœ€è¿‘æ‰æ·»åŠ çš„ï¼Œç¿»éå…¨ç½‘éƒ½æ²¡æ‰¾åˆ°æ›´è¯¦ç»†çš„æè¿°ï¼Œæ•…æ”¾å¼ƒæ­¤æ–¹æ³•ã€‚</p><h3 id="ç¬¬äºŒæ¬¡å°è¯•ï¼ˆæˆåŠŸï¼‰"><a href="#ç¬¬äºŒæ¬¡å°è¯•ï¼ˆæˆåŠŸï¼‰" class="headerlink" title="ç¬¬äºŒæ¬¡å°è¯•ï¼ˆæˆåŠŸï¼‰"></a>ç¬¬äºŒæ¬¡å°è¯•ï¼ˆæˆåŠŸï¼‰</h3><p>æ—¢ç„¶æŒ‡å®šæ ¼å¼è¡Œä¸é€šäº†ï¼Œé‚£æˆ‘ä»¬è¿˜å¯ä»¥å±è”½ FFmeg å¯¹å›¾ç‰‡æ ¼å¼çš„æ£€æµ‹ã€‚ä½†æ˜¯ FFmpeg æ–‡æ¡£é‡Œä¹Ÿæ²¡æœ‰æ‰¾åˆ°ç›¸å…³å‚æ•°ï¼ˆç¬‘å“­ğŸ˜‚ï¼‰ã€‚è¿™é‡Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è‡ªå·±ç¼–è¯‘æ¥å±è”½å›¾ç‰‡æ ¼å¼æ”¯æŒã€‚ä¸‹é¢æ˜¯ç¼–è¯‘è¿‡ç¨‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> --depth=1 https://github.com/FFmpeg/FFmpeg.git<br><span class="hljs-built_in">cd</span> FFmpeg<br>./configure --disable-doc --disable-asm --disable-x86asm --enable-openssl --enable-protocols --enable-protocol=https --disable-demuxer=image*<br>make -j4<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨è‡ªå·±ç¼–è¯‘çš„ FFmpeg å°è¯•ä¸‹è½½ï¼Œæœç„¶æˆåŠŸäº†ã€‚</p><h3 id="ç¬¬ä¸‰æ¬¡å°è¯•ï¼ˆæˆåŠŸï¼‰"><a href="#ç¬¬ä¸‰æ¬¡å°è¯•ï¼ˆæˆåŠŸï¼‰" class="headerlink" title="ç¬¬ä¸‰æ¬¡å°è¯•ï¼ˆæˆåŠŸï¼‰"></a>ç¬¬ä¸‰æ¬¡å°è¯•ï¼ˆæˆåŠŸï¼‰</h3><p>åœ¨æŸ¥æ‰¾èµ„æ–™çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç° m3u8 è¯­æ³•ä¸­æœ‰ä¸€ä¸ªæ ‡ç­¾ <code>EXT-X-BYTERANGE</code> <sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><span class="hint--top hint--rounded" aria-label="RFC 8216 - HTTP Live Streaming">[4]</span></a></sup>ï¼Œå¯ä»¥è¯»å–æŒ‡å®šèŒƒå›´çš„è§†é¢‘ç‰‡æ®µï¼Œè¯­æ³•ä¸ºï¼š<code>#EXT-X-BYTERANGE:&lt;è¯»å–å†…å®¹é•¿åº¦&gt;[@&lt;èµ·å§‹ä½ç½®åç§»é‡&gt;]</code>ã€‚ç”±äºåªè¦è¦ç ´å PNG æ ¼å¼å¤´å°±å¯ä»¥ä½¿ FFmpeg è¯†åˆ«åˆ°æ­£ç¡®çš„è§†é¢‘ï¼Œåç§» 8 å­—èŠ‚è¶³å¤Ÿäº†ã€‚è¿™é‡Œæˆ‘ä»¬æŠŠå‚æ•°è®¾ç½®ä¸º <code>100000000@8</code>ã€‚ä¸‹è½½è„šæœ¬å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æ‰‹åŠ¨ä¸‹è½½ m3u8 æ–‡ä»¶</span><br>wget https://pv.xbottle.top/demo/rick.m3u8<br><span class="hljs-comment"># ç»™æ¯ä¸€ä¸ªè§†é¢‘ç‰‡æ®µéƒ½åŠ ä¸Šæˆªå–èŒƒå›´</span><br>sed -i <span class="hljs-string">&#x27;/#EXTINF:*/a\#EXT-X-BYTERANGE:100000000@8&#x27;</span> ./rick.m3u8<br><span class="hljs-comment"># å¼€å§‹ä¸‹è½½</span><br>ffmpeg -protocol_whitelist file,http,https,tls,tcp -i ./rick.m3u8 -c cooy output.mp4<br></code></pre></td></tr></table></figure><p>è™½ç„¶å¯ä»¥ä¸‹è½½ï¼Œä½†æ˜¯ç”±äºä¸çŸ¥é“æ¯ä¸ªè§†é¢‘ç‰‡æ®µå…·ä½“å¤§å°ï¼Œä½¿ç”¨äº†å†™æ­»çš„ <code>100000000</code>ï¼ŒFFmpeg ä¸‹è½½æ—¶ä¼šå¡å¥½ä¹…ï¼Œä¸æ˜¯ä¸€ä¸ªå®Œç¾çš„æ–¹æ¡ˆï¼Œæ•…ä¸æ¨èã€‚</p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>è™½ç„¶å°è¯•æˆåŠŸäº†ä¸¤æ¬¡ï¼Œä½†æ˜¯åšæ³•éƒ½ä¸æ˜¯å¤ªä¼˜é›…ï¼Œè¿˜æ˜¯å¸Œæœ› FFmpeg å®˜æ–¹å¯ä»¥å¢å¼ºå¯¹ hls è‡ªå®šä¹‰è®¾ç½®çš„æ”¯æŒï¼Œå¦‚å¯ä»¥å¼ºåˆ¶æŒ‡å®šç‰‡æ®µæ ¼å¼ç­‰ã€‚å¯ä»¥é€šè¿‡ä¸€æ¡å‘½ä»¤æˆåŠŸä¸‹è½½</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://akarin.dev/2020/02/07/alicdn-video-hosting/">æäº‹æƒ…ï¼šç”¨â€œå›¾åºŠâ€ä¼ è§†é¢‘ï¼Œè‡ªå¸¦å…è´¹ CDN åŠ é€Ÿï¼ˆå·²å¤æ´»ï¼ï¼‰</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://bottle.moe/post-269.html">ç”¨å›¾åºŠçœ‹è§†é¢‘çš„ä½“éªŒÂ·æ”¹</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a href="https://ffmpeg.org/ffmpeg-formats.html#hls-1">FFmpeg Formats Documentation</a><a href="#fnref:3" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:4" class="footnote-text"><span><a href="https://datatracker.ietf.org/doc/html/rfc8216#section-4.3.2.2">RFC 8216 - HTTP Live Streaming</a><a href="#fnref:4" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content:encoded>
      
      
      <category domain="https://blog.kt286.com/categories/FFmpeg/">FFmpeg</category>
      
      
      <category domain="https://blog.kt286.com/tags/ffmpeg/">ffmpeg</category>
      
      <category domain="https://blog.kt286.com/tags/m3u8/">m3u8</category>
      
      
      <comments>https://blog.kt286.com/post/ffmpeg-download-video-faked-as-image/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>ä¸ºæ·±åº¦éŸ³ä¹æ·»åŠ å†…åµŒæ­Œè¯æ”¯æŒ</title>
      <link>https://blog.kt286.com/post/deepin-music-embeded-lyrics/</link>
      <guid>https://blog.kt286.com/post/deepin-music-embeded-lyrics/</guid>
      <pubDate>Sun, 30 Jan 2022 09:09:09 GMT</pubDate>
      
        
        
      <description>&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;ä¸€ä¸ªæœˆé»‘é£é«˜çš„æ™šä¸Šï¼Œç»“æŸäº†ä¸€å¤©çš„ç´§å¼ å·¥ä½œï¼ˆæ‘¸é±¼ï¼‰åæ‰“ç®—åœ¨ç¡å‰å¬ä¸€ä¼šç½‘æŠ‘äº‘éŸ³ä¹ã€‚åˆšè¦æ‰“å¼€æ’­æ”¾å™¨çš„æ—¶å€™çªç„¶æƒ³åˆ°ä¹‹å‰çœ‹åˆ°çš„æ·±åº¦éŸ³ä¹çš„æˆªå›¾ï¼Œå†³å®šè¯•ç”¨</description>
        
      
      
      
      <content:encoded><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä¸€ä¸ªæœˆé»‘é£é«˜çš„æ™šä¸Šï¼Œç»“æŸäº†ä¸€å¤©çš„ç´§å¼ å·¥ä½œï¼ˆæ‘¸é±¼ï¼‰åæ‰“ç®—åœ¨ç¡å‰å¬ä¸€ä¼šç½‘æŠ‘äº‘éŸ³ä¹ã€‚åˆšè¦æ‰“å¼€æ’­æ”¾å™¨çš„æ—¶å€™çªç„¶æƒ³åˆ°ä¹‹å‰çœ‹åˆ°çš„æ·±åº¦éŸ³ä¹çš„æˆªå›¾ï¼Œå†³å®šè¯•ç”¨ä¸€ä¸‹ã€‚</p><p>å°†ä¸‹è½½å¥½çš„éŸ³ä¹å¯¼å…¥æ·±åº¦éŸ³ä¹åç‚¹å‡»æ’­æ”¾ï¼Œå…´å†²å†²çš„æ‰“å¼€æ­Œè¯æ˜¾ç¤ºï¼Œå¤§å¤§çš„â€œæ²¡æœ‰æ‰¾åˆ°æ­Œè¯â€æ˜ å…¥çœ¼å¸˜<br><img src="/img/posts/deepin-music-embeded-lyrics/1.png" alt="æ²¡æœ‰æ‰¾åˆ°æ­Œè¯"></p><p>ä¸å¯¹å‘€ï¼Œæˆ‘è®°å¾—æˆ‘ä¸‹è½½æ­Œæ›²çš„æ—¶å€™æ˜æ˜å‹¾é€‰äº†åµŒå…¥æ­Œè¯çš„ã€‚æå‡ºç¥–ä¼ çš„ <code>ffprobe</code> æŸ¥çœ‹äº†ä¸€ä¸‹ï¼Œå‘ç°ç¡®å®æ˜¯æœ‰æ­Œè¯çš„ã€‚çœ‹æ¥æ˜¯æ·±åº¦éŸ³ä¹ä¸æ”¯æŒäº†ã€‚ä¸å…¶æ…¢æ…¢ç­‰å®˜æ–¹å®ç°ï¼Œä¸å¦‚è‡ªå·±åŠ¨æ‰‹ã€ä¸°è¡£è¶³é£Ÿã€‚<br><img src="/img/posts/deepin-music-embeded-lyrics/2.png" alt="ffprobe ç»“æœ"></p><h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>æ—¢ç„¶çŸ¥é“æ­Œè¯å·²ç»å†™åˆ°æ­Œæ›²ä¸­äº†ã€‚å°±å…ˆçœ‹çœ‹å†™åˆ°äº†æ­Œæ›²çš„ä»€ä¹ˆä½ç½®ï¼Œæ‰“å¼€ <a href="https://github.com/lyswhut/lx-music-desktop">æ´›é›ªéŸ³ä¹åŠ©æ‰‹</a> çš„æºç ï¼Œå…¨å±€æœç´¢ <code>lyrics</code>ï¼Œæ‰¾åˆ°å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// src/main/utils/mp3Meta.js</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">handleWriteMeta</span> = (<span class="hljs-params">meta, filePath</span>) =&gt; &#123;<br>  <span class="hljs-keyword">if</span> (meta.<span class="hljs-property">lyrics</span>) &#123;<br>    meta.<span class="hljs-property">unsynchronisedLyrics</span> = &#123;<br>      <span class="hljs-attr">language</span>: <span class="hljs-string">&#x27;zho&#x27;</span>,<br>      <span class="hljs-attr">text</span>: meta.<span class="hljs-property">lyrics</span>,<br>    &#125;<br>    <span class="hljs-keyword">delete</span> meta.<span class="hljs-property">lyrics</span><br>  &#125;<br>  <span class="hljs-title class_">NodeID3</span>.<span class="hljs-title function_">write</span>(meta, filePath)<br>&#125;<br></code></pre></td></tr></table></figure><p>æ ¹æ®ä»£ç æˆ‘ä»¬å¯ä»¥çŸ¥é“æ­Œè¯è¢«å†™å…¥åˆ° ID3 æ ‡ç­¾ä¸­çš„ <code>unsynchronisedLyrics</code> ä¸­ã€‚Google äº†ä¸€ä¸‹ï¼Œå‘ç°è¿™ä¸ªæ˜¯ ID3v2 æ ‡å‡†ä¸“é—¨ç”¨æ¥å­˜å‚¨æ–‡æœ¬æ­Œè¯<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="Unsychronised_lyrics_text_transcription - id3v2.3.0 - ID3.org">[1]</span></a></sup>çš„ï¼Œè€Œæ´›é›ªéŸ³ä¹åŠ©æ‰‹å†™å…¥çš„æ˜¯ lrc æ ¼å¼çš„æ­Œè¯ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦è¯»å–è¿™ä¸ªå±æ€§ä¸­å†…å®¹ï¼Œç›´æ¥æä¾›ç»™æ·±åº¦éŸ³ä¹æ˜¾ç¤ºå°±å¯ä»¥äº†ã€‚</p><h2 id="å¼€å‘"><a href="#å¼€å‘" class="headerlink" title="å¼€å‘"></a>å¼€å‘</h2><p>æ­Œè¯çš„æå–æˆ‘ä»¬å¯ä»¥å‚è€ƒæ·±åº¦éŸ³ä¹å¯¹æ­Œæ›²å°é¢å›¾çš„å¤„ç†æ–¹æ³•ï¼šæ·»åŠ æ­Œæ›²åå¼€å§‹è¯»å–æ­Œè¯ï¼Œè¯»å–åˆ°æ­Œè¯åï¼Œå†™å…¥ç¼“å­˜æ–‡ä»¶å¤¹é‡Œçš„ lyrics æ–‡ä»¶å¤¹ã€‚æ’­æ”¾æ—¶å…ˆä½¿ç”¨åŸæ¥çš„é€»è¾‘è·å–æ­Œæ›²åŒç›®å½•ä¸‹åŒåæ­Œè¯æ–‡ä»¶ï¼Œå¦‚æœæ²¡æ‰¾åˆ°å°±å»ç¼“å­˜æ–‡ä»¶å¤¹é‡Œ lyrics æ–‡ä»¶å¤¹ä¸­æŸ¥æ‰¾æ­Œè¯æ–‡ä»¶ï¼Œå¦‚æœè¿˜æ²¡æ‰¾åˆ°å†æ˜¾ç¤ºâ€œæ²¡æœ‰æ‰¾åˆ°æ­Œè¯â€ã€‚</p><p>æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼Œä»£ç å‚è€ƒäº† Stack Overflow çš„ä¸€ä¸ªå›ç­”<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="macos - How to get the lyrics of a song from the song file - Stack Overflow">[2]</span></a></sup> å’Œ TagLib æ–‡æ¡£<sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="TagLib API Documentation">[3]</span></a></sup></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// src/libdmusic/metadetector.cpp</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;taglib/mpegfile.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;taglib/id3v2tag.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;taglib/id3v2frame.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;taglib/unsynchronizedlyricsframe.h&gt;</span></span><br><br><span class="hljs-comment">// è·å–æ­Œè¯æ•°æ®ï¼Œå†™åˆ°ç¼“å­˜ç›®å½•</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">MetaDetector::getLyricData</span><span class="hljs-params">(<span class="hljs-type">const</span> QString &amp;path, <span class="hljs-type">const</span> QString &amp;tmpPath, <span class="hljs-type">const</span> QString &amp;hash)</span></span><br><span class="hljs-function"></span>&#123;<br>    QString lyricsDirPath = tmpPath + <span class="hljs-string">&quot;/lyrics&quot;</span>;<br>    QString lyricName = hash + <span class="hljs-string">&quot;.lrc&quot;</span>;<br>    <span class="hljs-function">QDir <span class="hljs-title">lyricsDir</span><span class="hljs-params">(lyricsDirPath)</span></span>;<br>    <span class="hljs-keyword">if</span> (!lyricsDir.<span class="hljs-built_in">exists</span>()) &#123;<br>        <span class="hljs-type">bool</span> isExists = lyricsDir.<span class="hljs-built_in">cdUp</span>();<br>        isExists &amp;= lyricsDir.<span class="hljs-built_in">mkdir</span>(<span class="hljs-string">&quot;lyrics&quot;</span>);<br>        isExists &amp;= lyricsDir.<span class="hljs-built_in">cd</span>(<span class="hljs-string">&quot;lyrics&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (!path.<span class="hljs-built_in">isEmpty</span>() &amp;&amp; !tmpPath.<span class="hljs-built_in">isEmpty</span>() &amp;&amp; !hash.<span class="hljs-built_in">isEmpty</span>()) &#123;<br>        <span class="hljs-keyword">if</span> (!lyricsDir.<span class="hljs-built_in">exists</span>(lyricName)) &#123;<br>            <span class="hljs-function">QFile <span class="hljs-title">lyric</span><span class="hljs-params">(lyricsDirPath + <span class="hljs-string">&quot;/&quot;</span> + lyricName)</span></span>;<br><br>            TagLib::<span class="hljs-function">MPEG::File <span class="hljs-title">f1</span><span class="hljs-params">(path.toStdString().c_str())</span></span>;<br>            TagLib::ID3v2::FrameList frames = f1.<span class="hljs-built_in">ID3v2Tag</span>()-&gt;<span class="hljs-built_in">frameListMap</span>()[<span class="hljs-string">&quot;USLT&quot;</span>];<br>            <span class="hljs-keyword">if</span> (!frames.<span class="hljs-built_in">isEmpty</span>()) &#123;<br>                TagLib::ID3v2::UnsynchronizedLyricsFrame *frame = <span class="hljs-built_in">dynamic_cast</span>&lt;TagLib::ID3v2::UnsynchronizedLyricsFrame *&gt;(frames.<span class="hljs-built_in">front</span>());<br>                <span class="hljs-keyword">if</span> (frame) &#123;<br>                    <span class="hljs-keyword">if</span> (lyric.<span class="hljs-built_in">open</span>(QIODevice::WriteOnly)) &#123;<br>                        QString str = <span class="hljs-built_in">TStringToQString</span>(frame-&gt;<span class="hljs-built_in">text</span>());<br>                        lyric.<span class="hljs-built_in">write</span>(str.<span class="hljs-built_in">toUtf8</span>());<br>                    &#125;<br>                    lyric.<span class="hljs-built_in">close</span>();<br>                &#125;<br>            &#125;   <br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// src/music-player/widget/lrc/musiclyricwidget.cpp</span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">MusicLyricWidget::onMusicPlayed</span><span class="hljs-params">(MediaMeta meta)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">Q_UNUSED</span>(meta)<br>    <span class="hljs-function">QFileInfo <span class="hljs-title">fileInfo</span><span class="hljs-params">(Player::getInstance()-&gt;getActiveMeta().localPath)</span></span>;<br>    QString lrcPath = fileInfo.<span class="hljs-built_in">dir</span>().<span class="hljs-built_in">path</span>() + QDir::<span class="hljs-built_in">separator</span>() + fileInfo.<span class="hljs-built_in">completeBaseName</span>() + <span class="hljs-string">&quot;.lrc&quot;</span>;<br>    <span class="hljs-function">QFile <span class="hljs-title">file</span><span class="hljs-params">(lrcPath)</span></span>;<br>    <span class="hljs-keyword">if</span> (!file.<span class="hljs-built_in">exists</span>()) &#123;<br>        <span class="hljs-comment">// è¯»å–æ ¹ç›®å½•ä¸­æ­Œè¯æ–‡ä»¶å¤±è´¥åè¯»å–åª’ä½“æ–‡ä»¶å†…åµŒçš„æ­Œè¯</span><br>        MediaMeta meta = Player::<span class="hljs-built_in">getInstance</span>()-&gt;<span class="hljs-built_in">getActiveMeta</span>();<br>        <span class="hljs-function">QFileInfo <span class="hljs-title">lyricInfo</span><span class="hljs-params">(Global::cacheDir() + <span class="hljs-string">&quot;/lyrics/&quot;</span> + meta.hash + <span class="hljs-string">&quot;.lrc&quot;</span>)</span></span>;<br>        <span class="hljs-keyword">if</span> (!lyricInfo.<span class="hljs-built_in">exists</span>()) &#123;<br>            m_nolyric-&gt;<span class="hljs-built_in">show</span>();<br>            m_lyricview-&gt;<span class="hljs-built_in">hide</span>();<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            m_nolyric-&gt;<span class="hljs-built_in">hide</span>();<br>            m_lyricview-&gt;<span class="hljs-built_in">show</span>();<br>            m_lyricview-&gt;<span class="hljs-built_in">getFromFile</span>(lyricInfo.<span class="hljs-built_in">filePath</span>());<br>        &#125;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        m_nolyric-&gt;<span class="hljs-built_in">hide</span>();<br>        m_lyricview-&gt;<span class="hljs-built_in">show</span>();<br>        m_lyricview-&gt;<span class="hljs-built_in">getFromFile</span>(lrcPath);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å®Œæ•´ä»£ç è§ï¼š<a href="https://github.com/linuxdeepin/deepin-music/pull/111/">https://github.com/linuxdeepin/deepin-music/pull/111/</a></p><p><img src="/img/posts/deepin-music-embeded-lyrics/3.png" alt="æ•ˆæœå›¾"></p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>æœ¬æ¬¡ä¿®æ”¹åªå®ç°äº†å¯¹ ID3v2 æ ‡ç­¾ä¸­éåŒæ­¥æ­Œè¯<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="Unsychronised_lyrics_text_transcription - id3v2.3.0 - ID3.org">[1]</span></a></sup>çš„è¯»å–ã€‚è‡³äºå¦ä¸€ç§åŒæ­¥æ­Œè¯<sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><span class="hint--top hint--rounded" aria-label="Synchronised_lyrics_text - id3v2.3.0 - ID3.org">[4]</span></a></sup>ï¼Œæ‰‹å¤´ä¸Šæ²¡æœ‰æµ‹è¯•æ–‡ä»¶ï¼Œå°±æš‚æ—¶æç½®ï¼Œä»¥åæœ‰æ—¶é—´å†æ¥å®ç°ã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://id3.org/id3v2.3.0#Unsychronised_lyrics.2Ftext_transcription">Unsychronised_lyrics_text_transcription - id3v2.3.0 - ID3.org</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://stackoverflow.com/questions/11051055/how-to-get-the-lyrics-of-a-song-from-the-song-file">macos - How to get the lyrics of a song from the song file - Stack Overflow</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a href="https://taglib.org/api/namespaceTagLib_1_1ID3v2.html">TagLib API Documentation</a><a href="#fnref:3" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:4" class="footnote-text"><span><a href="https://id3.org/id3v2.3.0#Synchronised_lyrics.2Ftext">Synchronised_lyrics_text - id3v2.3.0 - ID3.org</a><a href="#fnref:4" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content:encoded>
      
      
      <category domain="https://blog.kt286.com/categories/Deepin/">Deepin</category>
      
      
      <category domain="https://blog.kt286.com/tags/deepin/">deepin</category>
      
      <category domain="https://blog.kt286.com/tags/music/">music</category>
      
      <category domain="https://blog.kt286.com/tags/c/">c++</category>
      
      
      <comments>https://blog.kt286.com/post/deepin-music-embeded-lyrics/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>ä½¿ç”¨ UserScript ç»™ 438kan æ·»åŠ ç½‘é¡µå…¨å±æ”¯æŒ</title>
      <link>https://blog.kt286.com/post/438kan-webfullscreen/</link>
      <guid>https://blog.kt286.com/post/438kan-webfullscreen/</guid>
      <pubDate>Fri, 28 Jan 2022 19:26:15 GMT</pubDate>
      
        
        
      <description>&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;æœ€è¿‘ä¸€ç›´åœ¨ &lt;a href=&quot;http://438kan.com/&quot;&gt;438kan&lt;/a&gt; ä¸Šè¿½å‰§ï¼Œä½†æ˜¯ 438kan è‡ªå¸¦çš„æ’­æ”¾å™¨åµŒå¥—åœ¨ä¸€</description>
        
      
      
      
      <content:encoded><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœ€è¿‘ä¸€ç›´åœ¨ <a href="http://438kan.com/">438kan</a> ä¸Šè¿½å‰§ï¼Œä½†æ˜¯ 438kan è‡ªå¸¦çš„æ’­æ”¾å™¨åµŒå¥—åœ¨ä¸€ä¸ª iframe ä¸­ï¼Œä¸èƒ½ä½¿ç”¨ç½‘é¡µå…¨å±åŠŸèƒ½ã€‚è€Œä½¿ç”¨å…¨å±æ’­æ”¾è§†é¢‘æ—¶é‡åˆ°è¦å›å¤QQã€å¾®ä¿¡æ¶ˆæ¯çš„æƒ…å†µåˆ™éœ€è¦ä¸æ–­åœ¨å…¨å±/éå…¨å±ä¹‹é—´åˆ‡æ¢ï¼Œéå¸¸éº»çƒ¦ã€‚æ‰€ä»¥å†³å®šç ”ç©¶ç ”ç©¶ï¼Œå®ç° 438kan çš„ç½‘é¡µå…¨å±åŠŸèƒ½ã€‚</p><h2 id="åˆæ¬¡åˆ†æ"><a href="#åˆæ¬¡åˆ†æ" class="headerlink" title="åˆæ¬¡åˆ†æ"></a>åˆæ¬¡åˆ†æ</h2><p>æˆ‘ä»¬é¦–å…ˆåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€æ’­æ”¾å™¨åœ°å€ <a href="http://438kan.com/static/player/dplayer.html">http://438kan.com/static/player/dplayer.html</a>ï¼Œå³é”®-æŸ¥çœ‹ç½‘é¡µæºä»£ç ï¼Œæ‰¾åˆ°äº†å…¶ä¸­çš„å…³é”®ä»£ç </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> dplayer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DPlayer</span>(&#123;<br><span class="hljs-attr">element</span>: <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;player&quot;</span>),<br><span class="hljs-attr">autoplay</span>: <span class="hljs-literal">true</span>,<br><span class="hljs-attr">video</span>: &#123;<br><span class="hljs-attr">url</span>: parent.<span class="hljs-property">MacPlayer</span>.<span class="hljs-property">PlayUrl</span>,<br><span class="hljs-attr">type</span>:<span class="hljs-string">&#x27;hls&#x27;</span>,<br>&#125;<br>&#125;);<br></code></pre></td></tr></table></figure><p>é€šè¿‡ <code>parent.MacPlayer.PlayUrl</code> è¿™å¥æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œè§†é¢‘æ’­æ”¾åœ°å€æ˜¯åœ¨ iframe å¤–åŠ è½½çš„ï¼Œæ ¹æœ¬æ²¡å¿…è¦ä½¿ç”¨ iframe ï¼Œå¯ä»¥æŠŠ iframe æ•´ä¸ªæ›¿æ¢æ‰ã€‚è¿™é‡Œæˆ‘ä»¬ç›´æ¥ç”¨è¿™ä¸ª iframe çš„çˆ¶çº§div <code>MacPlayer</code> ä½œä¸ºæ’­æ”¾å™¨çš„å®¹å™¨ï¼Œé€šè¿‡ <code>UserScript</code> ä¸­çš„ <code>@require</code> åŠ è½½ <code>dplayer</code> åŠå…¶ä¾èµ– <code>hls</code>ï¼Œç›´æ¥åŠ è½½ <code>MacPlayer.PlayUrl</code> è¿™ä¸ªåœ°å€çš„è§†é¢‘</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// ==UserScript==</span><br><span class="hljs-comment">// @name             438kanç½‘é¡µå…¨å±</span><br><span class="hljs-comment">// @description      438kanç½‘é¡µå…¨å±</span><br><span class="hljs-comment">// @version          1.0</span><br><span class="hljs-comment">// @author           kt286</span><br><span class="hljs-comment">// @include          *://*.438kan.com/*</span><br><span class="hljs-comment">// @include          *://438kan.com/*</span><br><span class="hljs-comment">// @require          https://cdn.jsdelivr.net/npm/hls.js@1.1.3/dist/hls.min.js</span><br><span class="hljs-comment">// @require          https://cdn.jsdelivr.net/npm/dplayer@1.26.0/dist/DPlayer.min.js</span><br><span class="hljs-comment">// @grant            none</span><br><span class="hljs-comment">// @run-at           document-end</span><br><span class="hljs-comment">// ==/UserScript==</span><br><span class="hljs-keyword">var</span> dplayer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DPlayer</span>(&#123;<br>    <span class="hljs-attr">element</span>: <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;.MacPlayer&quot;</span>),<br>    <span class="hljs-attr">autoplay</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">video</span>: &#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-title class_">MacPlayer</span>.<span class="hljs-property">PlayUrl</span><br>    &#125;<br>&#125;);<br></code></pre></td></tr></table></figure><p>è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼Œiframe ä¸­æ’­æ”¾å™¨åœ°å€æ˜¯è¢« <a href="http://438kan.com/static/player/dplayer.js">http://438kan.com/static/player/dplayer.js</a> è¿™ä¸ª js åŠ è½½çš„ï¼Œä¸ºäº†é˜²æ­¢ä¸å¿…è¦çš„èµ„æºåŠ è½½ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>uBlock Origin</code> æˆ– <code>Adblock Plus</code> å°†å…¶æ‹¦æˆªã€‚</p><h2 id="ç¬¬äºŒæ¬¡åˆ†æ"><a href="#ç¬¬äºŒæ¬¡åˆ†æ" class="headerlink" title="ç¬¬äºŒæ¬¡åˆ†æ"></a>ç¬¬äºŒæ¬¡åˆ†æ</h2><p>è„šæœ¬å†™å®Œåï¼Œå¤åˆ¶åˆ° <a href="https://violentmonkey.github.io/">Violentmonkey</a> ä¸­ï¼Œåˆ·æ–°ç½‘é¡µã€‚éŸ³ä¹å£°å“èµ·ï¼Œä½†æ˜¯è§†é¢‘æ²¡æœ‰å‡ºç°ã€‚é€šè¿‡ F12 æˆ‘ä»¬å¯ä»¥å‘ç°è§†é¢‘å·²ç»åŠ è½½å‡ºæ¥äº†ï¼Œä½†æ˜¯é«˜åº¦å¼‚å¸¸</p><p><img src="/img/posts/438kan-webfullscreen/1.png" alt="è§†é¢‘é«˜åº¦å¼‚å¸¸"></p><p>ç»§ç»­åˆ†ææˆ‘ä»¬å‘ç° <code>MacPlayer</code> è¿™ä¸ªå…ƒç´ çš„ <code>padding-bottom</code> å±…ç„¶æœ‰ <code>500</code> å¤šï¼ŒæŠŠè§†é¢‘é«˜åº¦éƒ½ç»™æŒ¤æ²¡äº†ã€‚</p><p><img src="/img/posts/438kan-webfullscreen/2.png" alt="æ’­æ”¾å™¨ padding-bottom"></p><p>æ—¢ç„¶çŸ¥é“é—®é¢˜å‡ºåœ¨å“ªé‡Œäº†ï¼Œè§£å†³æ–¹æ¡ˆä¹Ÿå°±æœ‰äº†ï¼Œé‚£å°±æ˜¯è®¾ç½® <code>padding-bottom</code> ä¸º <code>0px</code>ã€‚ç°åœ¨æˆ‘ä»¬å°±æœ‰ä¸¤ç§å®ç°æ–¹æ¡ˆï¼š<code>UserCSS</code> å’Œ <code>UserScript</code>ã€‚è¿™é‡Œæˆ‘ä»¬ç»§ç»­ä½¿ç”¨ <code>UserScript</code>ã€‚<code>UserScript</code>ä¸­æ·»åŠ è‡ªå®šä¹‰æ ·å¼çš„æ–¹æ³•æ˜¯ <code>GM_addStyle</code>ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// ==UserScript==</span><br><span class="hljs-comment">// @name             438kanç½‘é¡µå…¨å±</span><br><span class="hljs-comment">// @description      438kanç½‘é¡µå…¨å±</span><br><span class="hljs-comment">// @version          1.0</span><br><span class="hljs-comment">// @author           kt286</span><br><span class="hljs-comment">// @include          *://*.438kan.com/*</span><br><span class="hljs-comment">// @include          *://438kan.com/*</span><br><span class="hljs-comment">// @require          https://cdn.jsdelivr.net/npm/hls.js@1.1.3/dist/hls.min.js</span><br><span class="hljs-comment">// @require          https://cdn.jsdelivr.net/npm/dplayer@1.26.0/dist/DPlayer.min.js</span><br><span class="hljs-comment">// @grant            GM_addStyle</span><br><span class="hljs-comment">// @run-at           document-end</span><br><span class="hljs-comment">// ==/UserScript==</span><br><span class="hljs-title function_">GM_addStyle</span>(<span class="hljs-string">&quot;.MacPlayer &#123; padding:0!important; &#125;&quot;</span>);<br><span class="hljs-keyword">var</span> dplayer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DPlayer</span>(&#123;<br>    <span class="hljs-attr">element</span>: <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;.MacPlayer&quot;</span>),<br>    <span class="hljs-attr">autoplay</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">video</span>: &#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-title class_">MacPlayer</span>.<span class="hljs-property">PlayUrl</span><br>    &#125;<br>&#125;);<br></code></pre></td></tr></table></figure><h2 id="ç¬¬ä¸‰æ¬¡åˆ†æ"><a href="#ç¬¬ä¸‰æ¬¡åˆ†æ" class="headerlink" title="ç¬¬ä¸‰æ¬¡åˆ†æ"></a>ç¬¬ä¸‰æ¬¡åˆ†æ</h2><p>å¢åŠ è‡ªå®šä¹‰æ ·å¼åï¼Œè§†é¢‘å‡ºæ¥äº†ï¼Œç½‘é¡µå…¨å±åŠŸèƒ½ä¹Ÿæ­£å¸¸äº†ã€‚ä½†è¿˜æœ‰ä¸€ç‚¹ç‚¹å°ç‘•ç–µï¼Œå°±æ˜¯å¯¼èˆªæ æ‚¬æµ®åœ¨æ’­æ”¾å™¨ä¸Šæ–¹ï¼Œé®æŒ¡äº†ä¸€éƒ¨åˆ†è§†é¢‘ã€‚è¿™ä¸ªå°±ç®€å•äº†ï¼Œåªè¦æŠŠæ’­æ”¾å™¨ <code>z-index</code> å€¼è®¾ç½®çš„å¤§äºå¯¼èˆªæ çš„å€¼å°±å¯ä»¥äº†ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// ==UserScript==</span><br><span class="hljs-comment">// @name             438kanç½‘é¡µå…¨å±</span><br><span class="hljs-comment">// @description      438kanç½‘é¡µå…¨å±</span><br><span class="hljs-comment">// @version          1.0</span><br><span class="hljs-comment">// @author           kt286</span><br><span class="hljs-comment">// @include          *://*.438kan.com/*</span><br><span class="hljs-comment">// @include          *://438kan.com/*</span><br><span class="hljs-comment">// @require          https://cdn.jsdelivr.net/npm/hls.js@1.1.3/dist/hls.min.js</span><br><span class="hljs-comment">// @require          https://cdn.jsdelivr.net/npm/dplayer@1.26.0/dist/DPlayer.min.js</span><br><span class="hljs-comment">// @grant            GM_addStyle</span><br><span class="hljs-comment">// @run-at           document-end</span><br><span class="hljs-comment">// ==/UserScript==</span><br><span class="hljs-title function_">GM_addStyle</span>(<span class="hljs-string">&quot;.MacPlayer &#123; padding:0!important; z-index:999!important; &#125;&quot;</span>);<br><span class="hljs-keyword">var</span> dplayer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DPlayer</span>(&#123;<br>    <span class="hljs-attr">element</span>: <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;.MacPlayer&quot;</span>),<br>    <span class="hljs-attr">autoplay</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">video</span>: &#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-title class_">MacPlayer</span>.<span class="hljs-property">PlayUrl</span><br>    &#125;<br>&#125;);<br></code></pre></td></tr></table></figure><p>åˆ·æ–°è§†é¢‘ï¼Œç½‘é¡µå…¨å±ä¸€åˆ‡æ­£å¸¸ã€‚è¿™ä¸‹èˆ’æœäº†ã€‚</p>]]></content:encoded>
      
      
      <category domain="https://blog.kt286.com/categories/UserScript/">UserScript</category>
      
      
      <category domain="https://blog.kt286.com/tags/userscript/">userscript</category>
      
      <category domain="https://blog.kt286.com/tags/dplayer/">dplayer</category>
      
      
      <comments>https://blog.kt286.com/post/438kan-webfullscreen/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>æˆ‘çš„ deepin åˆå§‹åŒ–è„šæœ¬</title>
      <link>https://blog.kt286.com/post/deepin-init/</link>
      <guid>https://blog.kt286.com/post/deepin-init/</guid>
      <pubDate>Fri, 28 Jan 2022 11:21:45 GMT</pubDate>
      
        
        
      <description>&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;æœ¬äººä¸€ç›´å–œæ¬¢æŠ˜è…¾ç³»ç»Ÿï¼Œç»å¸¸ä¼šç©è¿‡å¤´æŠŠç³»ç»Ÿæå´©æºƒã€‚æ¯æ¬¡é‡è£…åéƒ½éœ€è¦è¿›è¡Œå¤§é‡é…ç½®ï¼Œè´¹æ—¶è´¹åŠ›ã€‚æ‰€ä»¥å†™äº†ä¸ªè„šæœ¬ä¸€é”®é…ç½®ï¼Œè§£æ”¾åŒæ‰‹ã€‚&lt;/p&gt;
&lt;h2 </description>
        
      
      
      
      <content:encoded><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœ¬äººä¸€ç›´å–œæ¬¢æŠ˜è…¾ç³»ç»Ÿï¼Œç»å¸¸ä¼šç©è¿‡å¤´æŠŠç³»ç»Ÿæå´©æºƒã€‚æ¯æ¬¡é‡è£…åéƒ½éœ€è¦è¿›è¡Œå¤§é‡é…ç½®ï¼Œè´¹æ—¶è´¹åŠ›ã€‚æ‰€ä»¥å†™äº†ä¸ªè„šæœ¬ä¸€é”®é…ç½®ï¼Œè§£æ”¾åŒæ‰‹ã€‚</p><h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h2><table><thead><tr><th>ç›®æ ‡</th><th>è¿›åº¦</th></tr></thead><tbody><tr><td>å¸è½½å®‰è£…å¸¸ç”¨è½¯ä»¶</td><td>100%</td></tr><tr><td>ç³»ç»Ÿé…ç½®ï¼ˆæ§åˆ¶ä¸­å¿ƒè®¾ç½®ï¼‰</td><td>70%</td></tr><tr><td>ç³»ç»Ÿåº”ç”¨é…ç½®ï¼ˆæ–‡ä»¶ç®¡ç†å™¨ã€ç¼–è¾‘å™¨ç­‰ï¼‰</td><td>0%</td></tr><tr><td>ç”¨æˆ·åº”ç”¨é…ç½®ï¼ˆChromeã€VSCodeç­‰ï¼‰</td><td>0%</td></tr></tbody></table><h2 id="å…¼å®¹æ€§"><a href="#å…¼å®¹æ€§" class="headerlink" title="å…¼å®¹æ€§"></a>å…¼å®¹æ€§</h2><p>ä»…é€‚é…æœ€æ–°ç‰ˆæœ¬ Deepinï¼Œå½“å‰ç‰ˆæœ¬ <code>20.4</code></p><h2 id="é£Ÿç”¨æ–¹æ³•"><a href="#é£Ÿç”¨æ–¹æ³•" class="headerlink" title="é£Ÿç”¨æ–¹æ³•"></a>é£Ÿç”¨æ–¹æ³•</h2><blockquote><p>æ­é… <a href="https://bbs.deepin.org/post/228568">ã€Šæˆ‘çš„deepinå˜å½¢è®°ã€‹</a> é£Ÿç”¨æ•ˆæœæ›´ä½³</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">wget https://raw.githubusercontent.com/kt286/deepin-init/master/deepin-init.sh<br><span class="hljs-built_in">chmod</span> +x deepin-init.sh<br>sh deepin-init.sh<br></code></pre></td></tr></table></figure><p>è¿æ¥ä¸ä¸Š Github çš„åŒå­¦ä¹Ÿå¯ä»¥å¤åˆ¶ä¸‹æ–‡ä¸­è„šæœ¬ï¼Œå¦å­˜ä¸º <code>deepin-init.sh</code> æ–‡ä»¶ä½¿ç”¨</p><h2 id="è„šæœ¬åŸæ–‡"><a href="#è„šæœ¬åŸæ–‡" class="headerlink" title="è„šæœ¬åŸæ–‡"></a>è„šæœ¬åŸæ–‡</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><br><span class="hljs-comment">#å…ˆè¿›åˆ°ç”¨æˆ·ä¸‹è½½ç›®å½•</span><br><span class="hljs-built_in">cd</span> ~/Downloads<br><br><span class="hljs-comment"># å…³é—­æ§åˆ¶ä¸­å¿ƒè‡ªåŠ¨æ›´æ–°</span><br>busctl call com.deepin.lastore /com/deepin/lastore com.deepin.lastore.Updater SetAutoCheckUpdates b 0<br>busctl call com.deepin.lastore /com/deepin/lastore com.deepin.lastore.Updater SetAutoDownloadUpdates b 0<br>busctl call com.deepin.lastore /com/deepin/lastore com.deepin.lastore.Updater SetUpdateNotify b 0<br>busctl call com.deepin.lastore /com/deepin/lastore com.deepin.lastore.Manager SetAutoClean b 0<br><br><span class="hljs-comment"># ç³»ç»Ÿè®¾ç½®</span><br>gsettings <span class="hljs-built_in">set</span> com.deepin.xsettings dtk-window-radius 8  <span class="hljs-comment"># çª—å£åœ†è§’-ä¸­</span><br><br>gsettings <span class="hljs-built_in">set</span> com.deepin.dde.dock display-mode <span class="hljs-string">&#x27;efficient&#x27;</span>  <span class="hljs-comment"># dock-é«˜æ•ˆæ¨¡å¼</span><br>gsettings <span class="hljs-built_in">set</span> com.deepin.dde.dock window-size-efficient 46  <span class="hljs-comment"># dock-é«˜åº¦å¢åŠ </span><br><br>gsettings <span class="hljs-built_in">set</span> com.deepin.dde.dock.module.multitasking <span class="hljs-built_in">enable</span> <span class="hljs-literal">false</span>  <span class="hljs-comment"># dock-ç¦ç”¨å¤šä»»åŠ¡çª—å£æ’ä»¶ï¼ˆå¾…è°ƒæ•´ä¸ºåªå…³é—­ï¼Œä¸ç¦ç”¨ï¼‰</span><br>gsettings <span class="hljs-built_in">set</span> com.deepin.dde.dock.module.show-desktop <span class="hljs-built_in">enable</span> <span class="hljs-literal">false</span>  <span class="hljs-comment"># dock-ç¦ç”¨æ˜¾ç¤ºæ¡Œé¢æ’ä»¶ï¼ˆå¾…è°ƒæ•´ä¸ºåªå…³é—­ï¼Œä¸ç¦ç”¨ï¼‰</span><br><br>gsettings <span class="hljs-built_in">set</span> com.deepin.dde.mouse disable-touchpad <span class="hljs-literal">true</span>  <span class="hljs-comment">#æ’å…¥é¼ æ ‡æ—¶ç¦ç”¨è§¦æ§æ¿</span><br><br>gsettings <span class="hljs-built_in">set</span> com.deepin.dde.power battery-lid-closed-action <span class="hljs-string">&#x27;turnOffScreen&#x27;</span> <span class="hljs-comment">#ä½¿ç”¨ç”µæ± -ç¬”è®°æœ¬åˆç›–æ—¶-å…³é—­å±å¹•</span><br>gsettings <span class="hljs-built_in">set</span> com.deepin.dde.power battery-press-power-button <span class="hljs-string">&#x27;showSessionUI&#x27;</span> <span class="hljs-comment">#ä½¿ç”¨ç”µæ± -æŒ‰ç”µæºæŒ‰é’®æ—¶-ä¸åšä»»ä½•æ“ä½œ</span><br>gsettings <span class="hljs-built_in">set</span> com.deepin.dde.power battery-lock-delay 0  <span class="hljs-comment">#ä½¿ç”¨ç”µæ± -è‡ªåŠ¨é”å± ä»ä¸</span><br>gsettings <span class="hljs-built_in">set</span> com.deepin.dde.power battery-screen-black-delay 300  <span class="hljs-comment">#ä½¿ç”¨ç”µæ± -å…³é—­æ˜¾ç¤ºå™¨ 5åˆ†é’Ÿ</span><br>gsettings <span class="hljs-built_in">set</span> com.deepin.dde.power battery-sleep-delay 0  <span class="hljs-comment">#ä½¿ç”¨ç”µæ± -è¿›å…¥å¾…æœºæ¨¡å¼ ä»ä¸</span><br><br>gsettings <span class="hljs-built_in">set</span> com.deepin.dde.power line-power-lid-closed-action <span class="hljs-string">&#x27;turnOffScreen&#x27;</span> <span class="hljs-comment">#è¿æ¥ç”µæº-ç¬”è®°æœ¬åˆç›–æ—¶-å…³é—­å±å¹•</span><br>gsettings <span class="hljs-built_in">set</span> com.deepin.dde.power line-power-press-power-button <span class="hljs-string">&#x27;showSessionUI&#x27;</span> <span class="hljs-comment">#è¿æ¥ç”µæº-æŒ‰ç”µæºæŒ‰é’®æ—¶-ä¸åšä»»ä½•æ“ä½œ</span><br>gsettings <span class="hljs-built_in">set</span> com.deepin.dde.power line-power-lock-delay 0  <span class="hljs-comment">#è¿æ¥ç”µæº-è‡ªåŠ¨é”å± ä»ä¸</span><br>gsettings <span class="hljs-built_in">set</span> com.deepin.dde.power line-power-screen-black-delay 900  <span class="hljs-comment">#è¿æ¥ç”µæº-å…³é—­æ˜¾ç¤ºå™¨ 15åˆ†é’Ÿ</span><br>gsettings <span class="hljs-built_in">set</span> com.deepin.dde.power line-power-sleep-delay 0  <span class="hljs-comment">#è¿æ¥ç”µæº-è¿›å…¥å¾…æœºæ¨¡å¼ ä»ä¸</span><br><br><span class="hljs-comment">#æ·»åŠ Chromeæºåˆ°source.list.d</span><br>wget -q -O - http://dl.google.com/linux/linux_signing_key.pub | sudo apt-key add -<br>sudo sh -c <span class="hljs-string">&#x27;echo &quot;deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main&quot; &gt; /etc/apt/sources.list.d/google-chrome.list&#x27;</span><br><br><span class="hljs-comment">#æ·»åŠ VSCodeæºåˆ°source.list.d</span><br>wget -q -O - https://packages.microsoft.com/keys/microsoft.asc | sudo apt-key add -<br>sudo sh -c <span class="hljs-string">&#x27;echo &quot;deb [arch=amd64] https://packages.microsoft.com/repos/vscode stable main&quot; &gt; /etc/apt/sources.list.d/vscode.list&#x27;</span><br><br><span class="hljs-comment">#æ·»åŠ Dockeræºåˆ°source.list.d</span><br>wget -q -O - https://mirrors.cloud.tencent.com/docker-ce/linux/debian/gpg | sudo apt-key add -<br>sudo sh -c <span class="hljs-string">&#x27;echo &quot;deb [arch=amd64] https://mirrors.cloud.tencent.com/docker-ce/linux/debian buster stable&quot; &gt; /etc/apt/sources.list.d/docker.list&#x27;</span><br><br><span class="hljs-comment">#æ·»åŠ Typoraæºåˆ°source.list.d</span><br>wget -q -O - https://typora.io/linux/public-key.asc | sudo apt-key add -<br>sudo sh -c <span class="hljs-string">&#x27;echo &quot;deb https://typora.io/linux ./&quot; &gt; /etc/apt/sources.list.d/typora.list&#x27;</span><br><br><span class="hljs-comment">#æ·»åŠ Beyond Compareæºåˆ°source.list.d</span><br>wget -q -O - https://www.scootersoftware.com/RPM-GPG-KEY-scootersoftware | sudo apt-key add -<br>sudo sh -c <span class="hljs-string">&#x27;echo &quot;deb https://www.scootersoftware.com/ bcompare4 non-free&quot; &gt; /etc/apt/sources.list.d/scootersoftware.list&#x27;</span><br>sudo sh -c <span class="hljs-string">&#x27;echo &quot;Package: bcompare\nPin: origin www.scootersoftware.com\nPin-Priority: 600&quot; &gt; /etc/apt/preferences.d/scootersoftware&#x27;</span><br><br><span class="hljs-comment">#æ·»åŠ nodejsæºåˆ°source.list.d</span><br>wget -q -O - https://deb.nodesource.com/gpgkey/nodesource.gpg.key | sudo apt-key add -<br>sudo sh -c <span class="hljs-string">&#x27;echo &quot;deb https://deb.nodesource.com/node_16.x buster main&quot; &gt; /etc/apt/sources.list.d/nodesource.list&#x27;</span><br><br><span class="hljs-comment">#æ·»å†…æµ‹æºåˆ°source.list.d</span><br>sudo sh -c <span class="hljs-string">&#x27;echo &quot;deb [trusted=yes] https://proposed-packages.deepin.com/dde-apricot unstable main contrib non-free&quot; &gt; /etc/apt/sources.list.d/deepin-unstable.list&#x27;</span><br><br><span class="hljs-comment">#å¸è½½ç³»ç»Ÿè‡ªå¸¦Flash</span><br>sudo apt-get purge -y libflashplugin-pepper<br><span class="hljs-built_in">rm</span> -rf ~/.config/google-chrome/PepperFlash/<br><br><span class="hljs-comment">#å¸è½½æ·±åº¦å¸®åŠ©æ‰‹å†Œå’Œæ·±åº¦æ¬¢è¿ä¸¤ä¸ªæ²¡ç”¨è¿˜å åœ°æ–¹çš„ä¸œè¥¿ï¼ˆä¼šåŒæ—¶å¸è½½ddeï¼Œè²Œä¼¼æ²¡å•¥é—®é¢˜ï¼‰</span><br>sudo apt-get purge -y deepin-manual<br>sudo apt-get purge -y dde-introduction<br><br><span class="hljs-comment">#å¸è½½è‡ªå·±ä¸éœ€è¦çš„è½¯ä»¶</span><br>sudo apt-get purge -y deepin-feedback<br>sudo apt-get purge -y deepin-app-store<br>sudo apt-get purge -y deepin-deepinid-client<br>sudo apt-get purge -y deepin-calculator<br>sudo apt-get purge -y deepin-draw<br>sudo apt-get purge -y deepin-voice-note<br>sudo apt-get purge -y deepin-album<br>sudo apt-get purge -y deepin-camera<br>sudo apt-get purge -y deepin-mail<br>sudo apt-get purge -y deepin-screensaver*<br>sudo apt-get purge -y deepin-clone<br>sudo apt-get purge -y deepin-recovery-plugin<br>sudo apt-get purge -y deepin-ab-recovery<br>sudo apt-get purge -y deepin-boot-maker<br>sudo apt-get purge -y gnome-theme*<br>sudo apt-get purge -y libreoffice*<br>sudo apt-get purge -y simple-scan<br>sudo apt-get purge -y printer-driver-deepin-cloud-print<br>sudo apt-get purge -y org.deepin.browser<br>sudo apt-get purge -y yelp<br>sudo apt-get purge -y fcitx*<br><br><span class="hljs-comment">#è¿™ä¸¤ä¸ªæ˜¯æ§åˆ¶ä¸­å¿ƒé‡Œä¿®æ”¹å±å¹•è‰²æ¸©çš„ï¼Œä½†æ˜¯åˆ‡æ¢è‹±ä¼Ÿè¾¾é©±åŠ¨åæ— æ³•ä¿®æ”¹ï¼Œæ‰€ä»¥å¸è½½</span><br>sudo apt-get purge -y geoclue-2.0<br>sudo apt-get purge -y redshift<br><br><span class="hljs-comment">#æ›´æ–°20.4åï¼Œå¸è½½è¿™ä¸ªä¼šå¯¼è‡´æ— æ³•å³é”®è·³è½¬åˆ°è®¾ç½®ï¼Œé…Œæƒ…å¸è½½</span><br><span class="hljs-comment">#sudo apt-get purge -y onboard-common</span><br><br><span class="hljs-comment">#è¿™ä¸ªæ˜¯ç”¨æ¥å¼€å…³æœºç”»é¢çš„ï¼Œæˆ‘ä¸ªäººå–œæ¬¢çœ‹å¼€æœºè¾“å‡ºæ–‡å­—ä¿¡æ¯ï¼Œæ‰€ä»¥å¸è½½</span><br>sudo apt-get purge -y plymouth*<br><br><span class="hljs-comment">#è¿™å‡ ä¸ªæ˜¯ç³»ç»Ÿè‡ªå¸¦å°æ¸¸æˆï¼ˆäº”å­æ£‹å’Œè¿è¿çœ‹ï¼‰</span><br>sudo apt-get purge -y com.deepin*<br><br><span class="hljs-comment">#æ¸…ç†ä¸€ä¸‹</span><br>sudo apt-get autoremove -y --purge<br><br><span class="hljs-comment">#å®‰è£…è½¯ä»¶</span><br>sudo apt-get update &amp;&amp; sudo apt-get dist-upgrade -y<br>sudo apt-get install -y curl<br>sudo apt-get install -y git<br>sudo apt-get install -y console-setup<br>sudo apt-get install -y cmake-extras<br>sudo apt-get install -y code<br>sudo apt-get install -y google-chrome-stable<br>sudo apt-get install -y com.qq.office.deepin<br>sudo apt-get install -y com.qq.weixin.deepin<br>sudo apt-get install -y com.oray.sunlogin.client<br>sudo apt-get install -y cn.wps.wps-office<br>sudo apt-get install -y docker-ce<br>sudo apt-get install -y typora<br>sudo apt-get install -y fcitx5-chinese-addons<br>sudo apt-get install -y bcompare<br>sudo apt-get install -y nodejs<br>sudo apt-get install -y remmina<br><br><span class="hljs-comment">#å¸è½½fcitxæ—¶ä¼šåŒæ—¶å¸è½½qdbusï¼Œå¯¼è‡´æˆªå›¾å½•å±æ— æ³•ä½¿ç”¨å¿«æ·é”®å‘¼å‡ºï¼Œé‡æ–°å®‰è£…ä¿®å¤(å®‰è£… qdbus-qt5 ä¹Ÿå¯ä»¥ï¼Œä¸çŸ¥é“æœ‰ä»€ä¹ˆåŒºåˆ«)</span><br>sudo apt-get install -y qdbus<br><br><span class="hljs-comment">#å®‰è£…nvidiaé—­æºé©±åŠ¨</span><br>sudo apt-get install -y nvidia-detect<br>nvidia-detect | awk <span class="hljs-string">&#x27;match($0, /nvidia-.*/, a) &#123;print a[0]&#125;&#x27;</span> | xargs sudo apt-get -y install<br><br><span class="hljs-comment">#éšè—å¯åŠ¨å™¨ä¸­ fcitx5é…ç½®ã€é”®ç›˜å¸ƒå±€æŸ¥çœ‹å·¥å…·</span><br>sudo sed -i <span class="hljs-string">&#x27;$a\NoDisplay=true&#x27;</span> /usr/share/applications/fcitx5-configtool.desktop <br>sudo sed -i <span class="hljs-string">&#x27;$a\NoDisplay=true&#x27;</span> /usr/share/applications/kbd-layout-viewer5.desktop<br><br><span class="hljs-comment">#ä¿®å¤å‘½ä»¤è¡Œå®‰è£…TIMã€å¾®ä¿¡ã€å‘æ—¥è‘µã€WPSï¼Œå¯åŠ¨å™¨ä¸­æ²¡æœ‰å›¾æ ‡</span><br><span class="hljs-built_in">mkdir</span> -p ~/.local/share/applications/<br><br><span class="hljs-built_in">cp</span> -r /opt/apps/com.qq.office.deepin/entries/icons/* ~/.local/share/icons/<br><span class="hljs-built_in">cp</span> -r /opt/apps/com.qq.office.deepin/entries/applications/* ~/.local/share/applications/<br><br><span class="hljs-built_in">cp</span> -r /opt/apps/com.qq.weixin.deepin/entries/icons/* ~/.local/share/icons/<br><span class="hljs-built_in">cp</span> -r /opt/apps/com.qq.weixin.deepin/entries/applications/* ~/.local/share/applications/<br><br><span class="hljs-built_in">cp</span> -r /opt/apps/com.oray.sunlogin.client/entries/icons/* ~/.local/share/icons/<br><span class="hljs-built_in">cp</span> -r /opt/apps/com.oray.sunlogin.client/entries/applications/* ~/.local/share/applications/<br><br><span class="hljs-built_in">cp</span> -r /opt/apps/cn.wps.wps-office/entries/icons/* ~/.local/share/icons/<br><span class="hljs-built_in">cp</span> -r /opt/apps/cn.wps.wps-office/entries/applications/* ~/.local/share/applications/<br><br><span class="hljs-comment">#ä¿®å¤å¸è½½å¤šä¸ªè½¯ä»¶åé‡å¯ï¼Œå¯åŠ¨å™¨ä¸­åˆå‡ºç°å·²å¸è½½çš„å›¾æ ‡</span><br><span class="hljs-built_in">rm</span> -rf ~/.config/deepin/dde-launcher-app-used-sorted-list.conf<br><br><span class="hljs-comment">#ä¿®å¤å®‰è£…VSCodeåï¼ŒWin + E æ‰“å¼€çš„æ˜¯VSCode</span><br>xdg-mime default dde-file-manager.desktop inode/directory<br><br><span class="hljs-comment">#åˆ é™¤Chromeæ¨èè®¾ç½®</span><br>sudo <span class="hljs-built_in">rm</span> /etc/opt/chrome/policies/recommended/*.json<br><br><span class="hljs-comment">#fcitx5å¼€æœºè‡ªå¯åŠ¨</span><br><span class="hljs-built_in">mkdir</span> -p ~/.config/autostart<br>sudo <span class="hljs-built_in">cp</span> /usr/share/applications/org.fcitx.Fcitx5.desktop ~/.config/autostart/org.fcitx.Fcitx5.desktop<br><br><span class="hljs-comment">#fcitx5å›¾æ ‡ç¾åŒ–</span><br>wget -t 3 -T 15 https://raw.githubusercontent.com/kt286/deepin-init/master/assets/pinyin.svg<br>sudo <span class="hljs-built_in">cp</span> pinyin.svg /usr/share/icons/bloom/apps/64/org.fcitx.Fcitx5.svg<br>sudo <span class="hljs-built_in">cp</span> pinyin.svg /usr/share/icons/bloom/apps/64/org.fcitx.Fcitx5.fcitx-pinyin.svg<br><br>sudo <span class="hljs-built_in">mv</span> /usr/share/icons/bloom/actions/24/input-keyboard-symbolic.svg /usr/share/icons/bloom/actions/24/input-keyboard-symbolic.svg.bak<br>sudo <span class="hljs-built_in">ln</span> -s /usr/share/icons/bloom/status/20/keyboard-symbolic.svg /usr/share/icons/bloom/status/20/input-keyboard-symbolic.svg<br><br><span class="hljs-comment">#fcitx5è¯åº“</span><br>wget -t 3 -T 15 https://github.com/felixonmars/fcitx5-pinyin-zhwiki/releases/download/0.2.3/zhwiki-20220226.dict<br>sudo <span class="hljs-built_in">cp</span> zhwiki-20220226.dict ~/.local/share/fcitx5/pinyin/dictionaries/fcitx5-pinyin-zhwiki.dict<br><br><span class="hljs-comment">#fcitx5çš®è‚¤</span><br><span class="hljs-built_in">mkdir</span> -p ~/.local/share/fcitx5/themes/Material-Color<br>git <span class="hljs-built_in">clone</span> https://github.com/hosxy/Fcitx5-Material-Color.git ~/.local/share/fcitx5/themes/Material-Color<br><span class="hljs-built_in">ln</span> -s ~/.local/share/fcitx5/themes/Material-Color/theme-blue.conf ~/.local/share/fcitx5/themes/Material-Colortheme.conf<br><br><span class="hljs-comment">#ä½¿ç”¨è‡ªå·±ç¼–è¯‘çš„æ·±åº¦éŸ³ä¹</span><br>wget -t 3 -T 15 https://raw.githubusercontent.com/kt286/deepin-init/master/assets/deepin-music<br>sudo <span class="hljs-built_in">cp</span> deepin-music /usr/bin/deepin-music<br><br><span class="hljs-comment">#TIMä½¿ç”¨å…¬å…±deepin-wine6-stable</span><br>sudo <span class="hljs-built_in">rm</span> -rf /opt/apps/com.qq.office.deepin/files/helper_archive.7z<br>sudo <span class="hljs-built_in">rm</span> -rf /opt/apps/com.qq.office.deepin/files/helper_archive.md5sum<br>sudo <span class="hljs-built_in">rm</span> -rf /opt/apps/com.qq.office.deepin/files/wine_archive.7z<br>sudo <span class="hljs-built_in">rm</span> -rf /opt/apps/com.qq.office.deepin/files/wine_archive.md5sum<br><br>sudo <span class="hljs-built_in">cp</span> /opt/apps/com.qq.office.deepin/files/run.sh /opt/apps/com.qq.office.deepin/files/run.sh.bak<br>sudo <span class="hljs-built_in">cp</span> -r /opt/apps/com.qq.weixin.deepin/files/run.sh /opt/apps/com.qq.office.deepin/files/run.sh<br>sudo sed -i <span class="hljs-string">&#x27;s/Deepin-WeChat/Deepin-TIM/g&#x27;</span> /opt/apps/com.qq.office.deepin/files/run.sh<br>sudo sed -i <span class="hljs-string">&#x27;s/3.4.0.38deepin4/3.3.5.22018deepin8/g&#x27;</span> /opt/apps/com.qq.office.deepin/files/run.sh<br>sudo sed -i <span class="hljs-string">&#x27;s/WeChat\/WeChat/TIM\/Bin\/TIM/g&#x27;</span> /opt/apps/com.qq.office.deepin/files/run.sh<br>sudo sed -i <span class="hljs-string">&#x27;s/com.qq.weixin.deepin/com.qq.office.deepin/g&#x27;</span> /opt/apps/com.qq.office.deepin/files/run.sh<br><br><span class="hljs-comment">#æ›´æ–°TIMåˆ°æœ€æ–°ç‰ˆæœ¬</span><br>sh -c  <span class="hljs-string">&#x27;/opt/apps/com.qq.office.deepin/files/run.sh -c&#x27;</span><br><span class="hljs-built_in">export</span> WINEPREFIX=<span class="hljs-variable">$HOME</span>/.deepinwine/Deepin-TIM<br><span class="hljs-built_in">rm</span> TIM3.3.9.22051.exe<br>wget -t 3 -T 15 https://dldir1.qq.com/qqfile/qq/TIM3.3.9/TIM3.3.9.22051.exe<br>deepin-wine6-stable TIM3.3.9.22051.exe<br><br><span class="hljs-comment">#æ›´æ–°å¾®ä¿¡åˆ°æœ€æ–°ç‰ˆæœ¬</span><br>sh -c  <span class="hljs-string">&#x27;/opt/apps/com.qq.weixin.deepin/files/run.sh -c&#x27;</span><br><span class="hljs-built_in">export</span> WINEPREFIX=<span class="hljs-variable">$HOME</span>/.deepinwine/Deepin-WeChat<br><span class="hljs-built_in">rm</span> WeChatSetup.exe<br>wget -t 3 -T 15 https://dldir1.qq.com/weixin/Windows/WeChatSetup.exe<br>deepin-wine6-stable WeChatSetup.exe<br><br><span class="hljs-comment">#å¤§å¹…é™ä½å¾®ä¿¡å†…å­˜å ç”¨ï¼ˆç‰ºç‰²å°ç¨‹åºå’Œå…¬ä¼—å·ï¼Œæ…ç”¨ï¼‰</span><br><span class="hljs-built_in">rm</span> -rf ~/.deepinwine/Deepin-WeChat/drive_c/users/$(<span class="hljs-built_in">whoami</span>)/Application\ Data/Tencent/WeChat/XPlugin/Plugins/XWeb/<br><span class="hljs-built_in">touch</span> ~/.deepinwine/Deepin-WeChat/drive_c/users/$(<span class="hljs-built_in">whoami</span>)/Application\ Data/Tencent/WeChat/XPlugin/Plugins/XWeb<br><span class="hljs-built_in">chmod</span> 000 ~/.deepinwine/Deepin-WeChat/drive_c/users/$(<span class="hljs-built_in">whoami</span>)/Application\ Data/Tencent/WeChat/XPlugin/Plugins/XWeb <br><br><span class="hljs-comment">#æ¸…ç†ä¸€ä¸‹</span><br>sudo apt-get autoremove -y --purge<br></code></pre></td></tr></table></figure>]]></content:encoded>
      
      
      <category domain="https://blog.kt286.com/categories/Deepin/">Deepin</category>
      
      
      <category domain="https://blog.kt286.com/tags/deepin/">deepin</category>
      
      
      <comments>https://blog.kt286.com/post/deepin-init/#disqus_thread</comments>
      
    </item>
    
  </channel>
</rss>
